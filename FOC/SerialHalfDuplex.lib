http://developer.mbed.org/users/mbed_unsupported/code/SerialHalfDuplex/#12cff7161a85
